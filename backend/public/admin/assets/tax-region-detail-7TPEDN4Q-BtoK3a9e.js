import{T as _,u as E,a as w,b as D}from"./chunk-5HNEEYAB-CsA3e2UV.js";import{u as N,a as C,T as O}from"./chunk-XJJIKT6O-DUmBAMnH.js";import{T as z}from"./chunk-ILELZIT2-dy_ms9ju.js";import{S as k,r as j,d as A,f8 as B,a as I,j as e,dE as L,b as x,C as u,Y as q,_ as F,f1 as G,f9 as T,H as R,T as g,B as f,k as S}from"./index-HrqC_Gjd.js";import{fa as Pe}from"./index-HrqC_Gjd.js";import{a as H}from"./chunk-66JYR4ST-BGU2Hk9q.js";import{S as J}from"./chunk-UR2E444G-Dxg_E1qB.js";import"./chunk-3IW4HYUP-B0hjLMKq.js";import"./lodash-DnQioFv5.js";import{A as Q}from"./alert-QeTB5x2-.js";import"./chunk-C76H5USB-CPsw4htd.js";import"./chunk-VNYVDWWH-aQIGveY2.js";import"./chunk-3WXBLS2P-MKHj1mOQ.js";import"./chunk-YEDAFXMB-B43R7CK6.js";import"./chunk-AOFGTNG6-Dh0uMGDi.js";import"./chunk-WX2SMNCD-CTOHXE5S.js";import"./plus-mini-JAMyv6UA.js";import"./index-DZRnaetd.js";import"./pencil-square-m42K-ws3.js";import"./trash-Cj0dULeA.js";import"./arrow-down-right-mini-GwR2Vb34.js";import"./status-badge-DAzHDOtt.js";import"./chunk-EQTBJSBZ-OwKj9_dY.js";import"./react-country-flag.esm-CaD3AKTA.js";import"./use-prompt-B2nwlCmB.js";import"./prompt-DzgdWoNF.js";import"./Trans-EQ5E-fso.js";import"./x-mark-mini-Q_ZRZRmQ.js";var X=({taxRegion:s})=>{const{t}=x(),i=s.tax_rates.filter(a=>a.is_default===!0),r=i.length===0;return e.jsxs(u,{className:"divide-y p-0",children:[e.jsx(z,{taxRegion:s,type:"header",asLink:!1,badge:r&&e.jsx(q,{content:t("taxRegions.fields.noDefaultRate.tooltip"),children:e.jsx(F,{color:"orange",size:"2xsmall",className:"cursor-default",children:t("taxRegions.fields.noDefaultRate.label")})})}),i.map(a=>e.jsx(_,{taxRate:a},a.id))]})},h=10,v="p",Z=({taxRegion:s,showSublevelRegions:t})=>{const{t:i}=x(),{searchParams:r,raw:a}=N({pageSize:h,prefix:v}),{tax_regions:o,count:n,isPending:c,isError:l,error:p}=G({...r,parent_id:s.id},{placeholderData:S}),{table:y}=C({count:n,data:o,pageSize:h,prefix:v}),d=T(s.country_code);if(!d&&!t&&!s.children.length)return null;const P=(d==null?void 0:d.type)||"sublevel";if(l)throw p;return e.jsx(u,{className:"divide-y p-0",children:e.jsx(O,{variant:"province",action:{to:"provinces/create",label:i("actions.create")},table:y,isPending:c,queryObject:a,count:n,children:e.jsx(R,{level:"h2",children:i(`taxRegions.${P}.header`)})})})},b=10,m="o",W=({taxRegion:s})=>{const{t}=x(),{searchParams:i,raw:r}=E({pageSize:b,prefix:m}),{tax_rates:a,count:o,isPending:n,isError:c,error:l}=H({...i,tax_region_id:s.id,is_default:!1},{placeholderData:S}),{table:p}=w({count:o,data:a,pageSize:b,prefix:m});if(c)throw l;return e.jsx(u,{className:"p-0",children:e.jsx(D,{isPending:n,table:p,count:o,action:{label:t("actions.create"),to:"overrides/create"},queryObject:r,prefix:m,children:e.jsx(R,{level:"h2",children:t("taxRegions.taxOverrides.header")})})})},Y=({taxRegion:s,showSublevelRegions:t,setShowSublevelRegions:i})=>{const{t:r}=x(),[a,o]=j.useState(!1);return T(s.country_code)||t||a||s.children.length?null:e.jsx(Q,{dismissible:!0,variant:"info",className:"bg-ui-bg-base",children:e.jsxs("div",{className:"flex flex-col gap-y-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(g,{size:"small",leading:"compact",weight:"plus",asChild:!0,children:e.jsx("h2",{children:r("taxRegions.fields.sublevels.alert.header")})}),e.jsx(g,{size:"small",leading:"compact",className:"text-pretty",children:r("taxRegions.fields.sublevels.alert.description")})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx(f,{variant:"secondary",size:"small",onClick:()=>i(!0),children:r("taxRegions.fields.sublevels.alert.action")}),e.jsx(f,{variant:"transparent",size:"small",onClick:()=>o(!0),children:r("actions.hide")})]})]})})},Re=()=>{const{id:s}=k(),[t,i]=j.useState(!1),r=A(),{tax_region:a,isLoading:o,isError:n,error:c}=B(s,void 0,{initialData:r}),{getWidgets:l}=I();if(o||!a)return e.jsx(L,{sections:4,showJSON:!0});if(n)throw c;return e.jsxs(J,{data:a,showJSON:!0,widgets:{after:l("tax.details.after"),before:l("tax.details.before")},children:[e.jsx(Y,{taxRegion:a,showSublevelRegions:t,setShowSublevelRegions:i}),e.jsx(X,{taxRegion:a}),e.jsx(Z,{taxRegion:a,showSublevelRegions:t}),e.jsx(W,{taxRegion:a})]})};export{Re as Component,Re as TaxRegionDetail,Pe as loader};
